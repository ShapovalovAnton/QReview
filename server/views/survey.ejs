<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../public/style/main.css" rel="stylesheet" type="text/css"/>
    <link 
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1AnmQ2DgPJtlLomqWa0zl1tccQTwfspd3yD65VohhpuuCOmLASjC"
        crossorigin="anonymous"
    >
    <title>Маркетингові опитування</title>
</head>
<body class="body">
    <a class="btn btn-outline-secondary norm-btn btn_font" href="/" >
        На головну
    </a>

    <h1 class="text-center">Список опитувань</h1>
    <div class="table-responsive">
        <table class="table table-primary table-hover table-sm table_font">
            <tr>
                <th>ID</th>
                <th>Код клієнта</th>
                <th>Назва</th>
                <th>Опис</th>
                <th>Дата створення</th>
                <th>Статус</th>
                <th>Дата початку</th>
                <th>Дата завершення</th>
            </tr>

            <% for (var i = 0; i < survey.length; i++) { %>
            <tr>
                <td><%= survey[i].IdSurvey %></td>
                <td><%= survey[i].IdClient %></td>
                <td><%= survey[i].NameSurvey %></td>
                <td><%= survey[i].AboutSurvey %></td>
                <td>
                    <%= new Date(survey[i].DateCreateSurvey).toLocaleString('uk-UA', {
                      day: '2-digit',
                      month: '2-digit',
                      year: 'numeric',
                    }) %>
                  </td>
                <td><%= survey[i].StatusSurvey %></td>
                <td>
                    <%= new Date(survey[i].StartDateSurvey).toLocaleString('uk-UA', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                      }) %>
                </td>
                <td>
                    <%= new Date(survey[i].FinishDateSurvey).toLocaleString('uk-UA', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                      }) %>
                </td>
                <td style="background-color: white">
                    <a class="btn btn-danger" 
                        href="/api/survey/delete/<%= survey[i].IdSurvey %>">
                        Видалити
                    </a>
                </td>
                <td style="background-color: white">
                    <a class="btn btn-info" 
                        href="/api/survey/<%= survey[i].IdSurvey %>">
                        Редагувати
                    </a>
                </td>
            </tr>
            <% } %>
        </table>
    </div>
    <h2 class="text-center">
        Додати Опитування
    </h2>
    
    <form action="survey" method="POST" class="text-center">
        <div class="mb-3">
            <label>
                Назва
                <input type="text" class="form-control" placeholder="Ім'я" id="NameSurvey" name="NameSurvey">
            </label>
        </div>

        <label class="form-label">
            Код клієнта
            <input type="text" placeholder="Код" class="form-control" id="IdClient" name="IdClient">
        </label>
    
        <label class="form-label">
            Опис
            <input type="text" placeholder="Опис" class="form-control" id="AboutSurvey" name="AboutSurvey">
        </label>

        <label class="form-label">
            Дата створення
            <input type="date" placeholder="Дата" class="form-control" id="DateCreateSurvey" name="DateCreateSurvey">
        </label>

        <label class="form-label">
            Статус
            <input type="text" placeholder="Статус" class="form-control" id="StatusSurvey" name="StatusSurvey">
        </label>

        <label class="form-label">
            Дата початку
            <input type="date" placeholder="Дата" class="form-control" id="StartDateSurvey" name="StartDateSurvey">
        </label>

        <label class="form-label">
            Дата завершення
            <input type="date" placeholder="Дата" class="form-control" id="FinishDateSurvey" name="FinishDateSurvey">
        </label>
    
        <div class="btn-submit">
            <button type="submit" class="btn btn-outline-secondary btn_font">Додати</button>
        </div>
    </form>

    <script 
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFY1zC4A8Nt+NtUVF0sA7MsXp1UJJoMp4YLfEuNSfAPJcXn/tWtIaxVXM"
        crossorigin="anonymous">
    </script>
</body>

</html>